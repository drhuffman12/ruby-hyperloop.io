<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="google-site-verification" content="qjqVOvRhHfsuDbLOvaAnj2mkUZJ9Xwzg84TMVXduvUc" />

    <meta charset="UTF-8">
    <title>Hyperloop - Tutorials, Videos & Quickstarts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>


    <!-- Opal and Hyperloop -->
    <script src="https://rawgit.com/ruby-hyperloop/hyperloop-js/master/opal-compiler.min.js"></script>
    <script src="https://rawgit.com/ruby-hyperloop/hyperloop-js/master/hyperloop.min.js"></script>

    <!-- If you want local copies... -->
    <!-- <script src="../../../javascripts/opal-compiler.js"></script> -->
    <!-- <script src="../../../javascripts/hyperloop.js"></script> -->

    <script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>

    <script src="../../../javascripts/bootstrap.min.js"></script>
    <script src="../../../javascripts/codemirror.js"></script>
    <script src="../../../javascripts/ruby.js"></script>
    <script src="../../../javascripts/matchbrackets.js"></script>
    <script src="../../../javascripts/react_player.js"></script>
    <script src="../../../javascripts/highlight.pack.js"></script>


    <!-- Components are compiled by Hyperloop Express -->
    <script type="text/ruby">

class CodeMirror < Hyperloop::Component
  param :code, type: String
  param :heading, default: "Code"
  param :rows, type: Integer, default: 0
  param :top_level_component, type: String

  before_mount do
    r=rand(2**256).to_s(36)[0..7]
    @div_code = "code_#{r}"
    @div_result = "result_#{r}"
  end

  after_mount do
  # puts params.code
    @editor = `CodeMirror(document.getElementById(#{@div_code}), {
      value: #{params.code.to_s},
      mode: 'text/x-ruby',
      matchBrackets: true,
      lineNumbers: false,
      indentUnit: 2,
      theme: 'github'
    });`

    `#{@editor}.on('change', #{lambda {on_change} })`
    `#{@editor}.setSize(null, #{@editor}.defaultTextHeight()*#{params.rows})` unless params.rows == 0
    execute_code
  end

  render(DIV) do
    div.card {
      div.card_header { params.heading }
      div(id: @div_code)
      div.card_header do
        img(src: '../../../images/hyperloop-logo-small-white.png' , width:'25')
        span { ' ' }
        'Live editor results'
      end
      div.card_block(id: @div_result)
    }
  end

  def on_change
    execute_code
  end

  def execute_code
    begin
      code = `#{@editor}.getValue()`
      # puts code
      code += "\nElement['##{@div_result}'].render(#{params.top_level_component})"
      compiled_code = Opal::Compiler.new(code).compile

      `ReactDOM.unmountComponentAtNode(document.getElementById(#{@div_result}));`

      # Dispatchers and Receivers example works but Steps example breaks
      # Hyperloop::Context.reset!
      # `eval(#{compiled_code})`
      # Hyperloop::Application::Boot.run()

      # Steps example works but Dispatchers and Receivers example breaks
      `eval(#{compiled_code})`
      Hyperloop::Context.reset!
      Hyperloop::Application::Boot.run()

      component = Module.const_get params.top_level_component
      # we need to see if the component is valid - try checking if it can render static markup
      # the following line generates: `undefined method to_n for SimpleComponent`
      # if React.render_to_static_markup( component ).empty?
      #   invalid_component_message
      # end
    rescue Exception => e
      @time_out = after(0.1) do
        unable_to_compile_message e.message
      end
    end
  end

  def invalid_component_message
    message = div.text_danger do
      h3.text_danger {"Oops, invalid Component..."}
      p { "Your Component has been rejected by React. A valid Component must have a render macro and return just one HTML element." }
    end
    Element["##{@div_result}"].render{ message }
  end

  def unable_to_compile_message reason
    message = div.text_danger do
      h3.text_danger {"Can't compile..."}
      p { reason }
    end
    Element["##{@div_result}"].render{ message }
  end

end

</script>

    <script type="text/ruby">

Document.ready? do
   Element.find('div.codemirror-live-edit').each do |mount_point|
     heading = mount_point.attr('data-heading')
     rows = mount_point.attr('data-rows')
     top_level_component = mount_point.attr('data-top-level-component')
     code = Element[mount_point].find('pre').text.strip
     params = {code: code, top_level_component: top_level_component}
     params = params.merge({heading: heading}) if heading
     params = params.merge({rows: rows.to_i}) if rows
     codemirror_component = Object.const_get('CodeMirror')
     React.render(React.create_element(codemirror_component, params ), mount_point)
   end
end

</script>

    
    <script type="text/ruby">

class ToggleCodemirror < Hyperloop::Component
  param :code, type: String
  param :heading, default: "Code"
  param :rows, type: Integer, default: 0
  param :top_level_component, type: String
  param :show_code

  before_mount do
    r=rand(2**256).to_s(36)[0..7]
    @div_code = "code_#{r}"
    @div_result = "result_#{r}"
  end

  after_mount do
  # puts params.code
    @editor = `CodeMirror(document.getElementById(#{@div_code}), {
      value: #{params.code.to_s},
      mode: 'text/x-ruby',
      matchBrackets: true,
      lineNumbers: false,
      indentUnit: 2,
      theme: 'github'
    });`

    `#{@editor}.setSize(null, #{@editor}.defaultTextHeight()*#{params.rows})` unless params.rows == 0

    Element['.codediv'].hide('')
    mutate.show_code false
    
  end

  render(DIV) do
    div.card {
      div.card_header do
        div(class: 'row') do
          div(class: 'col-md-6') do
            img(src: '../../../images/hyperloop-logo-small-white.png' , width:'25') 
            span { ' ' }
            span { params.heading }
          end
          div(class: 'col-md-6 align-right') do

            toggle_link
          end
        end
      end

      div(id: @div_code, class: 'codediv') 
    }
  end

  def toggle_link
    
      BUTTON(class: 'btn btn-info btn-sm') do
        state.show_code ? "Click to hide code" : "Click to show code"
      end.on(:click) do |ev|
        mutate.show_code !state.show_code 
        state.show_code ? Element["##{@div_code}"].show('') : Element["##{@div_code}"].hide('')
      end
    
  end

 
end

</script>

    <script type="text/ruby">

Document.ready? do
    Element.find('div.togglecode').each do |mount_point|
        heading = mount_point.attr('data-heading')
        rows = mount_point.attr('data-rows')
        top_level_component = mount_point.attr('data-top-level-component')
        code = Element[mount_point].find('pre').text.strip
        params = {code: code, top_level_component: top_level_component}
        params = params.merge({heading: heading}) if heading
        params = params.merge({rows: rows.to_i}) if rows
        codemirror_component = Object.const_get('ToggleCodemirror')
        React.render(React.create_element(codemirror_component, params ), mount_point)
    end
end

</script>

    <link href="../../../stylesheets/bootstrap.min.css" rel="stylesheet" />
    <link href="../../../stylesheets/typography.css" rel="stylesheet" />
    <link href="../../../stylesheets/override.css" rel="stylesheet" />
    <link href="../../../stylesheets/divtable.css" rel="stylesheet" />
    <!-- <link href="../../../stylesheets/code.css" rel="stylesheet" /> -->
    <link href="../../../stylesheets/github.css" rel="stylesheet" />
    <link href="../../../stylesheets/highlighting.css" rel="stylesheet" />
    <link href="../../../stylesheets/codemirror.css" rel="stylesheet" />
    <link href="../../../stylesheets/monokai-sublime.css" rel="stylesheet" />

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />

    <!-- Favicons -->

    <link rel="apple-touch-icon" sizes="180x180" href="../../../images/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="../../../images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../images/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/manifest.json">
    <link rel="mask-icon" href="../../../images/safari-pinned-tab.svg" color="#e81176">
    <meta name="theme-color" content="#ffffff">

  </head>

  <body>
    <div class="navbarbackgroundcolor">
      <div class="container">
        <nav class="navbar navbar-ligh">
  <button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2" aria-controls="exCollapsingNavbar2" aria-expanded="false" aria-label="Toggle navigation">
    &#9776;
  </button>
  <div class="collapse navbar-toggleable-xs" id="exCollapsingNavbar2">
    <ul class="nav navbar-nav">
      <li class="nav-item">
        <a href="/" class="nav-link"><span class='navfirstletter'>H</span>yperloop</a>
      </li>
      <li class="nav-item">
        <a href="/start/components" class="nav-link active"><span class='navfirstletter'>S</span>tart</a>
      </li>
      <li class="nav-item">
        <a href="/installation" class="nav-link"><span class='navfirstletter'>I</span>nstallation</a>
      </li>
      <li class="nav-item">
        <a href="/tutorials" class="nav-link"><span class='navfirstletter'>T</span>utorials</a>
      </li>
      <li class="nav-item">
        <a href="/gems" class="nav-link"><span class='navfirstletter'>G</span>ems</a>
      </li>
      <li class="nav-item">
        <a href="https://github.com/ruby-hyperloop" class="nav-link"><span class='navfirstletter'>G</span>ithub</a>
      </li>
      <li class="nav-item">
        <a href="/tools" class="nav-link"><span class='navfirstletter'>T</span>ools</a>
      </li>
      <li class="nav-item">
        <a href="/docs/architecture" class="nav-link"><span class='navfirstletter'>D</span>ocs</a>
      </li>
      <li class="nav-item">
        <a href="/help" class="nav-link"><span class='navfirstletter'>H</span>elp</a>
      </li>
      <li class="nav-item">
        <a href="/blog" class="nav-link"><span class='navfirstletter'>B</span>log</a>
      </li>
      <li class="nav-item">
        <a href="/showcase" class="nav-link"><span class='navfirstletter'>S</span>howcase</a>
      </li>
      <!-- <li class="nav-item">
        <input type="text" name="search" />
      </li> -->
    </ul>
  </div>
</nav>

      </div>
    </div>

    <div class="jumbotron page-header">
      <div class="container">

        <div class="row hidden-sm-down">
          <div class="col-md-2">
            <div class="hyperlooplogo">
            </div>
          </div>
          <div class="col-md-8">

            <h1 class="display-4 project-name">Hyperloop</h1>

            <h4 class="display-7 project-tagline">
              Tutorials, Videos & Quickstarts
            </h4>
          </div>
          
        </div>

        <div class="row hidden-md-up">
          <div class="col-md-3">
            <div class="hyperlooplogo">
            </div>
          </div>
          <div class="col-md-9">
            <h1 class="h1 project-name center-text">Hyperloop</h1>
            </br>
            <h2 class="h5 project-tagline center-text">
              Tutorials, Videos & Quickstarts
            </h2>
          </div>
          
        </div>


      </div>
    </div>

    <div class="page-header-underline">
      <div class="container">

      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-3 sidenavcol">
            <ul class="nav">

    <li class="nav-item"><strong><a href="/tutorials/hyperloopcomps">Hyperloop COMPS</a></strong></li>
    <ul class="nav">
      <li class="nav-item"><a href="/tutorials/hyperloopcomps/compstoreop-first">Simple COMPS App</a></li>
    </ul>
    <br>

    <li class="nav-item"><strong><a href="/tutorials/hyperloopjs">Hyperloop.js</a></strong></li>
    <ul class="nav">
      <li class="nav-item"><a href="/tutorials/hyperloopjs/helloworld">Hello World</a></li>
      <li class="nav-item"><a href="/tutorials/hyperloopjs/chatapp">ChatApp Tutorial</a></li>
    </ul>
    <br>

    <li class="nav-item"><strong><a href="/tutorials/hyperlooprails">Hyperloop and Rails</a></strong></li>
    <ul class="nav">
      <li class="nav-item"><a href="/tutorials/hyperlooprails/helloworld">Hello World</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/cloud9">Hyperloop and Cloud9</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/chatapp">Chat App Rails</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/webpack">NPM and Webpack</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/webpacker">Webpacker GEM</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/eventsplanner">Events planner tutorial</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/fivelettergame">Five letter word game</a></li>
      <li class="nav-item"><a href="/tutorials/hyperlooprails/opalhotreloader">Opal Hot Reloader Tutorial</a></li>
    </ul>
    <br>

    <li class="nav-item"><strong><a href="/tutorials/hyperloopdeploy">Hyperloop deployment</a></strong></li>
    <ul class="nav">
      <li class="nav-item"><a href="/tutorials/hyperloopdeploy/deployvps">Deploy on VPS Tutorial</a></li>
      <li class="nav-item"><a href="/tutorials/hyperloopdeploy/deployheroku">Deploy on Heroku Tutorial</a></li>
    </ul>
    <br>

    <li class="nav-item"><strong><a href="/tutorials/opal">Opal</a></strong></li>
    <br>
    <li class="nav-item"><strong><a href="/tutorials/videos">Videos</a></strong></li>

  </ul>


          <br>
        </div>
        <div class="col-md-9 main-content">
          <h2 id="helloworld-tutorial"><i class="flaticon-professor-teaching"></i><span class="bigfirstletter">H</span>elloWorld Tutorial</h2>

<p><img src="https://raw.githubusercontent.com/ruby-hyperloop/hyperloop-js-helloworld/master/hyperloophelloworldscreenshot.png" alt="Screen" /></p>

<p>You can find the complete source code of this tutorial here: <a href="https://github.com/ruby-hyperloop/hyperloop-rails-helloworld">Hyperloop with Rails Helloworld app</a></p>

<h2 id="table-of-contents">Table of contents</h2>

<ul>
<li><a href="#introduction"><h4>Introduction</h4></a></li>
<li><a href="#chapter1"><h4>Chapter 1: Setting things up and styling</h4></a></li>
<li><a href="#chapter2"><h4>Chapter 2: First Hyperloop Component</h4></a></li>
<li><a href="#chapter3"><h4>Chapter 3: Hyperloop&#39;s jQuery wrapper</h4></a></li>
<li><a href="#chapter4"><h4>Chapter 4: First Hyperloop Store</h4></a></li>
<li><a href="#chapter5"><h4>Chapter 5: Isomorphic models and ActiveRecord API</h4></a></li>
</ul>

<h2 id="introduction"><a name="introduction">Introduction</a></h2>

<p>To set up your <strong>Hyperloop</strong> environment and continue this tutorial, please first follow the <a href="/installation#rorsetup">Hyperloop installation with Ruby On Rails</a> tutorial.</p>

<p>After <strong>Hyperloop</strong> has been installed properly we can go further.</p>

<h2 id="chapter-1-setting-things-up-and-styling"><a name="chapter1">Chapter 1: Setting things up and styling</a></h2>

<h3 id="step-1-1-creating-the-helloworld-component">Step 1.1: Creating the Helloworld component</h3>

<p>Run the hyperloop generator:</p>
<pre class="highlight plaintext"><code>rails g hyper:component Helloworld
</code></pre>
<p>You can view the new Component created in <code>/app/hyperloop/components/</code></p>

<h3 id="step-1-2-creating-the-controller">Step 1.2: Creating the controller</h3>

<p>Create a <code>home_controller.rb</code> file, manually or with the command <code>rails g controller Home helloworld --skip-javascripts</code>:</p>
<pre class="highlight ruby"><code><span class="c1">#app/controllers/home_controller.rb</span>

<span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">helloworld</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<h3 id="step-1-3-updating-the-routes-rb-file">Step 1.3: Updating the routes.rb file</h3>

<p>Add this line in your <code>routes.rb</code> file (better to keep the line <code>mount Hyperloop::Engine =&gt; &#39;/hyperloop&#39;</code> at the top of the file)</p>
<pre class="highlight ruby"><code><span class="c1">#config/routes.rb</span>

<span class="n">mount</span> <span class="no">Hyperloop</span><span class="o">::</span><span class="no">Engine</span> <span class="o">=&gt;</span> <span class="s1">'/hyperloop'</span>
<span class="n">root</span> <span class="s1">'home#helloworld'</span>
</code></pre>
<h3 id="step-1-4-creating-the-helloworld-view-file">Step 1.4: Creating the helloworld view file</h3>
<pre class="highlight erb"><code>#app/views/home/helloworld.html.erb

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"hyperloophelloword"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">react_component</span> <span class="s1">'::Helloworld'</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{</span> <span class="ss">prerender: </span><span class="kp">true</span> <span class="p">}</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/div&gt;</span>
</code></pre>
<h3 id="step-1-5-testing-your-app">Step 1.5: Testing your app</h3>

<p>Start your Rails server and browse <code>http://localhost:3000</code>.</p>

<p>You should see the text <code>Helloworld</code> rendered by the generic hyperloop <code>Component</code></p>

<h3 id="step-1-6-styling">Step 1.6: Styling</h3>

<p>Before going further and play with the <code>Component</code>, we will add some style and logo.</p>

<p>Add a <strong>Hyperloop</strong> logo</p>
<pre class="highlight erb"><code>#app/views/home/helloworld.html.erb

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"hyperloophelloword"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"https://rawgit.com/ruby-hyperloop/hyperloop-js-helloworld/master/hyperloop-logo-medium-white.png?raw=true"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;h3&gt;</span>The complete isomorphic ruby framework<span class="nt">&lt;/h3&gt;</span>
  <span class="nt">&lt;br&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">react_component</span> <span class="s1">'::Helloworld'</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{</span> <span class="ss">prerender: </span><span class="kp">true</span> <span class="p">}</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/div&gt;</span>
</code></pre>
<p>And load 2 stylesheets:</p>
<pre class="highlight erb"><code>#app/views/layouts/application.html.erb

<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>HyperloopRailsHelloworld<span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>

    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"</span> <span class="na">integrity=</span><span class="s">"sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://rawgit.com/ruby-hyperloop/hyperloop-js-helloworld/master/style.css"</span> <span class="nt">&gt;</span>

    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span>    <span class="s1">'application'</span><span class="p">,</span> <span class="ss">media: </span><span class="s1">'all'</span><span class="p">,</span> <span class="s1">'data-turbolinks-track'</span><span class="p">:</span> <span class="s1">'reload'</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s1">'application'</span><span class="p">,</span> <span class="s1">'data-turbolinks-track'</span><span class="p">:</span> <span class="s1">'reload'</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  <span class="nt">&lt;body&gt;</span>
    <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre>
<h2 id="chapter-2-first-hyperloop-component"><a name="chapter2">Chapter 2: First Hyperloop Component</a></h2>

<h3 id="step-2-1-introduction">Step 2.1: Introduction</h3>

<p>We are going to improve our <code>Helloworld</code> component and play with <code>state</code> params, which allows us to easily change the value of a variable and so create interactive interface.</p>

<p>This <code>Component</code> will display a button which can be clicked to toggle an input field. Then when typing in this field the content of it will be displayed below.</p>

<h3 id="step-2-2-basic-elements">Step 2.2: Basic elements</h3>

<p>Update the <code>Component</code> file as below:</p>
<pre class="highlight ruby"><code><span class="c1">#/app/hyperloop/components/helloworld.rb</span>

<span class="k">class</span> <span class="nc">Helloworld</span> <span class="o">&lt;</span> <span class="no">Hyperloop</span><span class="o">::</span><span class="no">Component</span>

  <span class="n">render</span><span class="p">(</span><span class="no">DIV</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">show_button</span>
    <span class="no">DIV</span><span class="p">(</span><span class="ss">class: </span><span class="s1">'formdiv'</span><span class="p">)</span> <span class="k">do</span>
      <span class="n">show_input</span>
      <span class="n">show_text</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show_button</span>
    <span class="no">BUTTON</span><span class="p">(</span><span class="ss">class: </span><span class="s1">'btn btn-info'</span><span class="p">)</span> <span class="k">do</span>
      <span class="s2">"Toggle button"</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show_input</span>

    <span class="no">H4</span> <span class="k">do</span> 
      <span class="no">SPAN</span><span class="p">{</span><span class="s1">'Please type '</span><span class="p">}</span>
      <span class="no">SPAN</span><span class="p">(</span><span class="ss">class: </span><span class="s1">'colored'</span><span class="p">)</span> <span class="p">{</span><span class="s1">'Hello World'</span><span class="p">}</span>
      <span class="no">SPAN</span><span class="p">{</span><span class="s1">' in the input field below :'</span><span class="p">}</span>
      <span class="no">BR</span> <span class="p">{}</span>
      <span class="no">SPAN</span><span class="p">{</span><span class="s1">'Or anything you want (^̮^)'</span><span class="p">}</span>
    <span class="k">end</span>

    <span class="no">INPUT</span><span class="p">(</span><span class="ss">type: :text</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'form-control'</span><span class="p">)</span>

  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show_text</span>
    <span class="no">H1</span> <span class="p">{</span> <span class="s2">"input field value will be displayed here"</span> <span class="p">}</span>
  <span class="k">end</span>

<span class="k">end</span>

</code></pre>
<h3 id="step-2-3-the-toggle-button">Step 2.3: The toggle button</h3>

<p>We are going to introduce a <code>state</code> param in order to get our toggle button working.</p>

<p>We will declare the <code>show_field</code> state param (with a default value equal to <code>false</code>) like this:</p>
<pre class="highlight ruby"><code><span class="n">state</span> <span class="ss">show_field: </span><span class="kp">false</span>
</code></pre>
<p>Then this <code>state</code> param value can be read like this:</p>
<pre class="highlight ruby"><code><span class="n">state</span><span class="p">.</span><span class="nf">show_field</span>
</code></pre>
<p>And can be changed like that:</p>
<pre class="highlight ruby"><code><span class="n">mutate</span><span class="p">.</span><span class="nf">show_field</span>
</code></pre>
<p>So, for this step, the <code>Component</code> code will be like that:</p>

<div class="togglecode" 
  data-heading="Step 2.3 Helloworld Component" 
  data-rows=16
  data-top-level-component="HelloworldComponent2-3">

<pre>
#/app/hyperloop/components/helloworld.rb

class Helloworld < Hyperloop::Component

  state show_field: false

  render(DIV) do
    show_button
    DIV(class: 'formdiv') do
      show_input
      show_text
    end if state.show_field
  end

  def show_button
    BUTTON(class: 'btn btn-info') do
      state.show_field ? "Click to hide HelloWorld input field" : "Click to show HelloWorld input field"
    end.on(:click) { mutate.show_field !state.show_field }
  end

  def show_input

    H4 do 
      SPAN{'Please type '}
      SPAN(class: 'colored') {'Hello World'}
      SPAN{' in the input field below :'}
      BR {}
      SPAN{'Or anything you want (^̮^)'}
    end

    INPUT(type: :text, class: 'form-control')

  end

  def show_text
    H1 { "input field value will be displayed here" }
  end

end

</pre>
</div>

<p>Refresh your browser page, and try the new toggle button.</p>

<h3 id="step-2-4-the-input-field">Step 2.4: The input field</h3>

<p>This time we are going to introduce a <code>field_value</code> state param with an empty default value:</p>
<pre class="highlight ruby"><code><span class="n">state</span> <span class="ss">field_value: </span><span class="s2">""</span>
</code></pre>
<p>Then we are going to get the input field value and update the <code>field_value</code> state accordingly with the <code>mutate</code> instruction:</p>
<pre class="highlight ruby"><code><span class="no">INPUT</span><span class="p">(</span><span class="ss">type: :text</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'form-control'</span><span class="p">).</span><span class="nf">on</span><span class="p">(</span><span class="ss">:change</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
  <span class="n">mutate</span><span class="p">.</span><span class="nf">field_value</span> <span class="n">e</span><span class="p">.</span><span class="nf">target</span><span class="p">.</span><span class="nf">value</span>
<span class="k">end</span>
</code></pre>
<p>So, for this step, the <code>Component</code> code will be like that:</p>

<div class="togglecode" 
  data-heading="Step 2.4 Helloworld Component" 
  data-rows=16
  data-top-level-component="HelloworldComponent2-4">

  <pre>
  #/app/hyperloop/components/helloworld.rb

  class Helloworld < Hyperloop::Component

    state show_field: false
    state field_value: ""

    render(DIV) do
      show_button
      DIV(class: 'formdiv') do
        show_input
        show_text
      end if state.show_field
    end

    def show_button
      BUTTON(class: 'btn btn-info') do
        state.show_field ? "Click to hide HelloWorld input field" : "Click to show HelloWorld input field"
      end.on(:click) { mutate.show_field !state.show_field }
    end

    def show_input

      H4 do 
        SPAN{'Please type '}
        SPAN(class: 'colored') {'Hello World'}
        SPAN{' in the input field below :'}
        BR {}
        SPAN{'Or anything you want (^̮^)'}
      end

      INPUT(type: :text, class: 'form-control').on(:change) do |e|
        mutate.field_value e.target.value
      end

    end

    def show_text
      H1 { "input field value will be displayed here" }
    end

  end

  </pre>
</div>

<p>If you refresh your browser page and type something in the INPUT field, nothing will be displayed below. it&#39;s because we need to update the <code>show_text</code> method in order to display the <code>show_field</code> state param value.</p>

<h3 id="step-2-5-displaying-the-input-field-value">Step 2.5: Displaying the input field value</h3>

<p>We just need to update the method like this: </p>
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">show_text</span>
  <span class="no">H1</span> <span class="p">{</span> <span class="s2">"</span><span class="si">#{</span><span class="n">state</span><span class="p">.</span><span class="nf">field_value</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>
<p>So, for this step, the <code>Component</code> code will be like that:</p>

<div class="togglecode" 
  data-heading="Step 2.5 Helloworld Component" 
  data-rows=16
  data-top-level-component="HelloworldComponent2-5">

  <pre>
    #/app/hyperloop/components/helloworld.rb

    class Helloworld < Hyperloop::Component

      state show_field: false
      state field_value: ""

      render(DIV) do
        show_button
        DIV(class: 'formdiv') do
          show_input
          show_text
        end if state.show_field
      end

      def show_button
        BUTTON(class: 'btn btn-info') do
          state.show_field ? "Click to hide HelloWorld input field" : "Click to show HelloWorld input field"
        end.on(:click) { mutate.show_field !state.show_field }
      end

      def show_input

        H4 do 
          SPAN{'Please type '}
          SPAN(class: 'colored') {'Hello World'}
          SPAN{' in the input field below :'}
          BR {}
          SPAN{'Or anything you want (^̮^)'}
        end

        INPUT(type: :text, class: 'form-control').on(:change) do |e|
          mutate.field_value e.target.value
        end

      end

      def show_text
        H1 { "#{state.field_value}" }
      end

    end

  </pre>
</div>

<h3 id="step-2-6-testing-your-app">Step 2.6: Testing your app</h3>

<p>Refresh the browser page and try !</p>

<p>Have you seen how it&#39;s easy to play with the DOM without any javascript or JQuery piece of code. All in awesome RUBY !</p>

<h2 id="chapter-3-hyperloops-jquery-wrapper"><a name="chapter3">Chapter 3: Hyperloop&#39;s jQuery wrapper</a></h2>

<h3 id="step-3-1-introduction">Step 3.1: Introduction</h3>

<p>In order to manipulate DOM nodes in your RUBY code and particularly in your Components, you can use the <strong><code>Element</code></strong> class, which is a Hyperloop&#39;s jQuery wrapper.</p>

<p>As an example we will use it in order to Hide and Show the Hyperloop logo when clicking on the <code>toggle button</code>.</p>

<h3 id="step-3-2-showing-hiding-the-hyperloop-logo">Step 3.2: Showing/Hiding the Hyperloop logo</h3>

<p>For doing that we will add a <code>toggle_logo(ev)</code> method, called by the <code>toggle_button</code> click event:</p>
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">show_button</span>
  <span class="no">BUTTON</span><span class="p">(</span><span class="ss">class: </span><span class="s1">'btn btn-info'</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">state</span><span class="p">.</span><span class="nf">show_field</span> <span class="p">?</span> <span class="s2">"Click to hide HelloWorld input field"</span> <span class="p">:</span> <span class="s2">"Click to show HelloWorld input field"</span>
  <span class="k">end</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="ss">:click</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">ev</span><span class="o">|</span>
    <span class="n">mutate</span><span class="p">.</span><span class="nf">show_field</span> <span class="o">!</span><span class="n">state</span><span class="p">.</span><span class="nf">show_field</span> 
    <span class="n">toggle_logo</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<p>And inside this method we will get the logo node and use the JQuery method to Show or Hide this element.</p>
<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">toggle_logo</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>
    <span class="n">ev</span><span class="p">.</span><span class="nf">prevent_default</span>
    <span class="n">logo</span> <span class="o">=</span> <span class="no">Element</span><span class="p">[</span><span class="s1">'img'</span><span class="p">]</span>
    <span class="n">state</span><span class="p">.</span><span class="nf">show_field</span> <span class="p">?</span> <span class="n">logo</span><span class="p">.</span><span class="nf">hide</span><span class="p">(</span><span class="s1">'slow'</span><span class="p">)</span> <span class="p">:</span> <span class="n">logo</span><span class="p">.</span><span class="nf">show</span><span class="p">(</span><span class="s1">'slow'</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
<p>As you can see, we first test the <code>state.show_field</code> value, if it&#39;s <code>True</code>, we hide the logo, if not, we show it.</p>

<p>So, for this step, the <code>Component</code> code will be like that:</p>

<div class="togglecode" 
  data-heading="Step 3.2 Helloworld Component" 
  data-rows=16
  data-top-level-component="HelloworldComponent3.2">

  <pre>
    #/app/hyperloop/components/helloworld.rb

    class Helloworld < Hyperloop::Component

      state show_field: false
      state field_value: ""

      render(DIV) do
        show_button
        DIV(class: 'formdiv') do
          show_input
          show_text
        end if state.show_field
      end

      def toggle_logo(ev)
        ev.prevent_default
        logo = Element['img']
        state.show_field ? logo.hide('slow') : logo.show('slow')
      end

      def show_button
        BUTTON(class: 'btn btn-info') do
          state.show_field ? "Click to hide HelloWorld input field" : "Click to show HelloWorld input field"
        end.on(:click) do |ev|
          mutate.show_field !state.show_field 
          toggle_logo(ev)
        end
      end

      def show_input

        H4 do 
          SPAN{'Please type '}
          SPAN(class: 'colored') {'Hello World'}
          SPAN{' in the input field below :'}
          BR {}
          SPAN{'Or anything you want (^̮^)'}
        end

        INPUT(type: :text, class: 'form-control').on(:change) do |e|
          mutate.field_value e.target.value
        end

      end

      def show_text
        H1 { "#{state.field_value}" }
      end

    end

  </pre>
</div>

<p>You can refresh and see the logo Hidden or Showed slowly when clicking on the <code>toggle_button</code>.</p>

<p>You can of course try others JQuery methods in order to play with elements of your page.</p>

<h2 id="chapter-4-first-hyperloop-store"><a name="chapter4">Chapter 4: First Hyperloop Store</a></h2>

<h3 id="step-4-1-introduction">Step 4.1: Introduction</h3>

<p>Hyperloop Stores exist to hold local application state. Components read state from Stores and render accordingly.</p>

<p>In Chapter 2, we saw that Hyperloop <code>Component</code> can also hold local variable state, but it is tied to the <code>Component</code> itself. With a <code>Store</code>, application state can be shared by others <code>Components</code>.</p>

<h3 id="step-4-2-creating-the-store">Step 4.2: Creating the Store</h3>

<p>The first step is to create a <code>Store</code> in the Hyperloop&#39;s stores directory and declare the 2 <code>state</code> we need:</p>
<pre class="highlight ruby"><code><span class="c1">#/app/hyperloop/stores/helloworld.rb</span>

<span class="k">class</span> <span class="nc">MyStore</span> <span class="o">&lt;</span> <span class="no">Hyperloop</span><span class="o">::</span><span class="no">Store</span>

  <span class="n">state</span> <span class="ss">show_field: </span><span class="kp">false</span><span class="p">,</span> <span class="ss">reader: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :class</span>
  <span class="n">state</span> <span class="ss">:field_value</span><span class="p">,</span> <span class="ss">reader: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :class</span>

<span class="k">end</span>
</code></pre>
<p>You can see the documentation or others tutorials to understand what are the <code>reader: true, scope: :class</code> we added in the state declaration. For now, let&#39;s learn the basics.</p>

<p>Then we will update the <code>Component</code> code for using the new <code>Store</code> state variables instead of using its own one.</p>

<p>We will replace all <code>state.show_field</code> by <code>MyStore.show_field</code> and all <code>mutate.show_field</code> by <code>MyStore.mutate.show_field</code>. The same of course for the <code>field_value</code> variable.</p>

<p>So, for this step, the <code>Component</code> code will be like that:</p>

<div class="togglecode" 
  data-heading="Step 4.2 Helloworld Component" 
  data-rows=16
  data-top-level-component="HelloworldComponent4.2">

  <pre>
    #/app/hyperloop/components/helloworld.rb


    class Helloworld < Hyperloop::Component

      
      render(DIV) do
        show_button
        DIV(class: 'formdiv') do
          show_input
          show_text
        end if MyStore.show_field
      end

      def toggle_logo(ev)
        ev.prevent_default
        logo = Element['img']
        MyStore.show_field ? logo.hide('slow') : logo.show('slow')
      end

      def show_button
        BUTTON(class: 'btn btn-info') do
          MyStore.show_field ? "Click to hide HelloWorld input field" : "Click to show HelloWorld input field"
        end.on(:click) do |ev|
          MyStore.mutate.show_field !MyStore.show_field 
          toggle_logo(ev)
        end
      end

      def show_input

        H4 do 
          SPAN{'Please type '}
          SPAN(class: 'colored') {'Hello World'}
          SPAN{' in the input field below :'}
          BR {}
          SPAN{'Or anything you want (^̮^)'}
        end

        INPUT(type: :text, class: 'form-control').on(:change) do |e|
          MyStore.mutate.field_value e.target.value
        end

      end

      def show_text
        H1 { "#{MyStore.field_value}" }
      end

    end

  </pre>
</div>

<h3 id="step-4-3-adding-a-method-to-the-store">Step 4.3: Adding a method to the Store</h3>

<p>Often, it can be useful to add a method to a <code>Store</code>, which can be called from any components and which contains all logic relative to the <code>state</code> variables manipulation.</p>

<p>We add the method <code>toggle_field</code> to <code>MyStore</code>: </p>
<pre class="highlight ruby"><code><span class="c1">#/app/hyperloop/stores/helloworld.rb</span>

<span class="k">class</span> <span class="nc">MyStore</span> <span class="o">&lt;</span> <span class="no">Hyperloop</span><span class="o">::</span><span class="no">Store</span>

  <span class="n">state</span> <span class="ss">show_field: </span><span class="kp">false</span><span class="p">,</span> <span class="ss">reader: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :class</span>
  <span class="n">state</span> <span class="ss">:field_value</span><span class="p">,</span> <span class="ss">reader: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :class</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">toggle_field</span>
    <span class="n">mutate</span><span class="p">.</span><span class="nf">show_field</span> <span class="o">!</span><span class="n">show_field</span>
    <span class="n">mutate</span><span class="p">.</span><span class="nf">field_value</span> <span class="s2">""</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre>
<p>And in the <code>Component</code> (in the <code>show_button</code> method), instead of manipulating the <code>Store</code> variables we will let <code>MyStore</code> doing it by calling the <code>toggle_field</code> method.</p>
<pre class="highlight ruby"><code><span class="no">MyStore</span><span class="p">.</span><span class="nf">mutate</span><span class="p">.</span><span class="nf">show_field</span> <span class="o">!</span><span class="no">MyStore</span><span class="p">.</span><span class="nf">show_field</span>
</code></pre>
<p>Replaced by:</p>
<pre class="highlight ruby"><code><span class="no">MyStore</span><span class="p">.</span><span class="nf">toggle_field</span>

</code></pre>
<p>So, for this step, the <code>Component</code> code will be like that:</p>

<div class="togglecode" 
  data-heading="Step 4.3 Helloworld Component" 
  data-rows=16
  data-top-level-component="HelloworldComponent4.3">

  <pre>
    #/app/hyperloop/components/helloworld.rb

    class Helloworld < Hyperloop::Component

      render(DIV) do
        show_button
        DIV(class: 'formdiv') do
          show_input
          show_text
        end if MyStore.show_field
      end

      def toggle_logo(ev)
        ev.prevent_default
        logo = Element['img']
        MyStore.show_field ? logo.hide('slow') : logo.show('slow')
      end

      def show_button
        BUTTON(class: 'btn btn-info') do
          MyStore.show_field ? "Click to hide HelloWorld input field" : "Click to show HelloWorld input field"
        end.on(:click) do |ev|
          MyStore.toggle_field 
          toggle_logo(ev)
        end
      end

      def show_input

        H4 do 
          SPAN{'Please type '}
          SPAN(class: 'colored') {'Hello World'}
          SPAN{' in the input field below :'}
          BR {}
          SPAN{'Or anything you want (^̮^)'}
        end

        INPUT(type: :text, class: 'form-control').on(:change) do |e|
          MyStore.mutate.field_value e.target.value
        end

      end

      def show_text
        H1 { "#{MyStore.field_value}" }
      end

    end

  </pre>
</div>

<h3 id="step-4-4-components-sharing-the-store-state">Step 4.4: Components sharing the Store state.</h3>

<p>We are now going to create a new Component named <code>InputBox</code>, and call it from our <code>helloworld</code> Component.
This <code>InputBox</code> Component will read/update some state of <code>MyStore</code>.</p>

<p>We copy the code inside of the <code>show_input</code> method a create a new component with it:</p>
<pre class="highlight ruby"><code><span class="c1">#/app/hyperloop/components/input_box.rb</span>

<span class="k">class</span> <span class="nc">InputBox</span> <span class="o">&lt;</span> <span class="no">Hyperloop</span><span class="o">::</span><span class="no">Component</span>

  <span class="k">def</span> <span class="nf">render</span>

    <span class="no">DIV</span> <span class="k">do</span>
      <span class="no">H4</span> <span class="k">do</span> 
        <span class="no">SPAN</span><span class="p">{</span><span class="s1">'Please type '</span><span class="p">}</span>
        <span class="no">SPAN</span><span class="p">(</span><span class="ss">class: </span><span class="s1">'colored'</span><span class="p">)</span> <span class="p">{</span><span class="s1">'Hello World'</span><span class="p">}</span>
        <span class="no">SPAN</span><span class="p">{</span><span class="s1">' in the input field below :'</span><span class="p">}</span>
        <span class="no">BR</span> <span class="p">{}</span>
        <span class="no">SPAN</span><span class="p">{</span><span class="s1">'Or anything you want (^̮^)'</span><span class="p">}</span>
      <span class="k">end</span>

      <span class="no">INPUT</span><span class="p">(</span><span class="ss">type: :text</span><span class="p">,</span> <span class="ss">value: </span><span class="no">MyStore</span><span class="p">.</span><span class="nf">field_value</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'form-control'</span><span class="p">).</span><span class="nf">on</span><span class="p">(</span><span class="ss">:change</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
        <span class="no">MyStore</span><span class="p">.</span><span class="nf">mutate</span><span class="p">.</span><span class="nf">field_value</span> <span class="n">e</span><span class="p">.</span><span class="nf">target</span><span class="p">.</span><span class="nf">value</span>
      <span class="k">end</span>

    <span class="k">end</span>

  <span class="k">end</span>

<span class="k">end</span>
</code></pre>
<p>And in the <code>Helloworld</code> Component, instead of calling the <code>show_input</code> method, we call the <code>InputBox()</code> Component.</p>
<pre class="highlight ruby"><code><span class="c1">#/app/hyperloop/components/helloworld.rb</span>

<span class="n">render</span><span class="p">(</span><span class="no">DIV</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">show_button</span>
    <span class="no">DIV</span><span class="p">(</span><span class="ss">class: </span><span class="s1">'formdiv'</span><span class="p">)</span> <span class="k">do</span>
      <span class="no">InputBox</span><span class="p">()</span>
      <span class="no">H1</span> <span class="p">{</span> <span class="s2">"</span><span class="si">#{</span><span class="no">MyStore</span><span class="p">.</span><span class="nf">field_value</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
    <span class="k">end</span> <span class="k">if</span> <span class="no">MyStore</span><span class="p">.</span><span class="nf">field_displayed</span>
  <span class="k">end</span>

</code></pre>
<p>So, for this step, the <code>Component</code> code will be like that:</p>

<div class="togglecode" 
  data-heading="Step 4.4 Helloworld Component" 
  data-rows=16
  data-top-level-component="HelloworldComponent4.4">

  <pre>
    #/app/hyperloop/components/helloworld.rb

    class Helloworld < Hyperloop::Component

      render(DIV) do
        show_button
        DIV(class: 'formdiv') do
          InputBox()
          show_text
        end if MyStore.show_field
      end

      def toggle_logo(ev)
        ev.prevent_default
        logo = Element['img']
        MyStore.show_field ? logo.hide('slow') : logo.show('slow')
      end

      def show_button
        BUTTON(class: 'btn btn-info') do
          MyStore.show_field ? "Click to hide HelloWorld input field" : "Click to show HelloWorld input field"
        end.on(:click) do |ev|
          MyStore.toggle_field 
          toggle_logo(ev)
        end
      end

      
      def show_text
        H1 { "#{MyStore.field_value}" }
      end

    end

  </pre>
</div>

<h2 id="chapter-5-isomorphic-models-and-activerecord-api"><a name="chapter5">Chapter 5: Isomorphic models and ActiveRecord API</a></h2>

<p>With Hyperloop, your server side Models are directly accessible from your Components or Stores.</p>

<p>We are going to create a Model associated to a Table inside your database with one column.
And we will see how we can easily read, update, create or delete any values of your Model, just like Ruby On Rails can do with ActiveRecord on the server side.</p>

<h3 id="step-5-1-setting-things-up">Step 5.1: Setting things up</h3>

<p>Be sure to stop your Rails app server (CTRL-C) before continuing.</p>

<p>Create your Model:</p>
<pre class="highlight plaintext"><code>rails generate model Helloworldmodel description:string
</code></pre>
<p>Migrate your database:</p>
<pre class="highlight plaintext"><code>rails db:migrate
</code></pre>
<p>Move these 2 files:</p>
<pre class="highlight plaintext"><code>mv app/models/application_record.rb app/hyperloop/models
mv app/models/helloworldmodel.rb app/hyperloop/models
</code></pre>
<p>You can restart your Rails server now. (Note: when lot of files has been created or modified in your Hyperloop directory, it can be usefull to clear the Rails app cache <code>rm -rf tmp/cache</code>, then when restarting your Rails app server, Hyperloop will re-precompile all files)</p>

<h3 id="step-5-2-saving-the-input-field-content-into-the-database">Step 5.2: Saving the input field content into the database</h3>

<p>We are going to add a <code>Save</code> button close to the input field and implement the method in order to save the content into the <code>description</code> attribute of HelloworldModel table.</p>

<p>We add the <code>save</code> button and call the <code>Helloworld</code> save_description method that we will implement soon:</p>
<pre class="highlight ruby"><code><span class="c1">#/app/hyperloop/components/input_box.rb</span>

<span class="k">class</span> <span class="nc">InputBox</span> <span class="o">&lt;</span> <span class="no">Hyperloop</span><span class="o">::</span><span class="no">Component</span>

  <span class="k">def</span> <span class="nf">render</span>

    <span class="no">DIV</span> <span class="k">do</span>
      <span class="no">H4</span> <span class="k">do</span> 
        <span class="no">SPAN</span><span class="p">{</span><span class="s1">'Please type '</span><span class="p">}</span>
        <span class="no">SPAN</span><span class="p">(</span><span class="ss">class: </span><span class="s1">'colored'</span><span class="p">)</span> <span class="p">{</span><span class="s1">'Hello World'</span><span class="p">}</span>
        <span class="no">SPAN</span><span class="p">{</span><span class="s1">' in the input field below :'</span><span class="p">}</span>
        <span class="no">BR</span> <span class="p">{}</span>
        <span class="no">SPAN</span><span class="p">{</span><span class="s1">'Or anything you want (^̮^)'</span><span class="p">}</span>
      <span class="k">end</span>

      <span class="no">INPUT</span><span class="p">(</span><span class="ss">type: :text</span><span class="p">,</span> <span class="ss">value: </span><span class="no">MyStore</span><span class="p">.</span><span class="nf">field_value</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'form-control'</span><span class="p">).</span><span class="nf">on</span><span class="p">(</span><span class="ss">:change</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
        <span class="no">MyStore</span><span class="p">.</span><span class="nf">mutate</span><span class="p">.</span><span class="nf">field_value</span> <span class="n">e</span><span class="p">.</span><span class="nf">target</span><span class="p">.</span><span class="nf">value</span>
      <span class="k">end</span>

      <span class="no">BUTTON</span><span class="p">(</span><span class="ss">class: </span><span class="s1">'btn btn-info'</span><span class="p">)</span> <span class="k">do</span>
        <span class="s2">"Save"</span>
      <span class="k">end</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="ss">:click</span><span class="p">)</span> <span class="p">{</span> <span class="no">Helloworld</span><span class="p">.</span><span class="nf">save_description</span> <span class="p">}</span>

    <span class="k">end</span>

  <span class="k">end</span>

<span class="k">end</span>

</code></pre>
<p>We add the <code>save_description</code> method, which follow the ActiveRecord model for creating a record into the database. </p>
<pre class="highlight ruby"><code><span class="c1">#/app/hyperloop/components/helloworld.rb</span>

<span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">save_description</span>
  <span class="no">Helloworldmodel</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">:description</span> <span class="o">=&gt;</span> <span class="no">MyStore</span><span class="p">.</span><span class="nf">field_value</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">result</span><span class="o">|</span>
    <span class="n">alert</span> <span class="s2">"unable to save"</span> <span class="k">unless</span> <span class="n">result</span> <span class="o">==</span> <span class="kp">true</span>
  <span class="k">end</span>
  <span class="n">alert</span><span class="p">(</span><span class="s2">"Data saved : </span><span class="si">#{</span><span class="no">MyStore</span><span class="p">.</span><span class="nf">field_value</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="no">MyStore</span><span class="p">.</span><span class="nf">mutate</span><span class="p">.</span><span class="nf">field_value</span> <span class="s2">""</span>
<span class="k">end</span>
</code></pre>
<p>So, for this step, the <code>Component</code> code will be like that:</p>

<div class="togglecode" 
  data-heading="Step 5.2 Helloworld Component" 
  data-rows=16
  data-top-level-component="HelloworldComponent5.2">

  <pre>
    #/app/hyperloop/components/helloworld.rb

    class Helloworld < Hyperloop::Component

      render(DIV) do
        show_button
        DIV(class: 'formdiv') do
          InputBox()
          show_text
        end if MyStore.show_field
      end

      def toggle_logo(ev)
        ev.prevent_default
        logo = Element['img']
        MyStore.show_field ? logo.hide('slow') : logo.show('slow')
      end

      def show_button
        BUTTON(class: 'btn btn-info') do
          MyStore.show_field ? "Click to hide HelloWorld input field" : "Click to show HelloWorld input field"
        end.on(:click) do |ev|
          MyStore.toggle_field 
          toggle_logo(ev)
        end
      end

      def show_text
        H1 { "#{MyStore.field_value}" }
      end

      def self.save_description
        Helloworldmodel.create(:description => MyStore.field_value) do |result|
          alert "unable to save" unless result == true
        end
        alert("Data saved : #{MyStore.field_value}")
        MyStore.mutate.field_value ""
      end

    end

  </pre>
</div>

<p>Refresh you browser page and try typing <code>Hello USA</code> into the Input field and click the <code>save</code> button.</p>

<h3 id="step-5-3-listing-the-saved-data">Step 5.3: Listing the saved data</h3>

        </div>
      </div>
    </div>

    <div class="page-footer-upperline">
      <div class="container">

      </div>
    </div>

    <footer class="nav-footer">
  <section class="sitemap">

    <a href="/" class="nav-home"></a>

    <div>
      <h6><a href="/start/components" class="hyperloop-white">Start</a></h6>
      <a href="/start/components">Components</a>
      <a href="/start/stores">Stores</a>
      <a href="/start/models">Models</a>
      <a href="/start/operations">Operations</a>
      <a href="/start/policies">Policies</a>
      <a href="/start/pragmatic">Pragmatic Thinking</a>
    </div>
    <div>


      <h6><a href="/tutorials" class="hyperloop-white">Tutorials</a></h6>
      <a href="/tutorials/hyperloopcomps">Hyperloop COMPS</a>
      <a href="/tutorials/hyperloopjs">Hyperloop.js</a>
      <a href="/tutorials/hyperlooprails">Hyperloop and Rails</a>
      <a href="/tutorials/hyperloopdeploy">Hyperloop deployment</a>
      <a href="/tutorials/opal">Opal</a>
      <a href="/tutorials/videos">Videos</a>
    </div>
    <div>
      <h6><a href="/installation" class="hyperloop-white">Installation</a></h6>
      <a href="/installation#opal-playground">Hyperloop.js</a>
  	  <a href="/installation#ror">With Ruby On Rails</a>
  	  <a href="/installation#with-sinatra">With Sinatra</a>
  	  <a href="/installation#deployment">Deployment</a>
    </div>
    <div>
      <h6><a href="/gems" class="hyperloop-white">Gems</a></h6>
      <a href="https://github.com/ruby-hyperloop/hyperloop">hyperloop</a>
      <a href="https://github.com/ruby-hyperloop/hyperloop-js">hyperloop-js</a>
      <a href="https://github.com/ruby-hyperloop/hyper-react">hyper-component</a>
      <a href="https://github.com/ruby-hyperloop/hyper-store">hyper-store</a>
      <a href="https://github.com/ruby-hyperloop/hyper-mesh">hyper-model</a>
      <a href="https://github.com/ruby-hyperloop/hyper-operation">hyper-operation</a>
      <a href="https://github.com/ruby-hyperloop/reactrb-router/tree/v2-4-0">hyper-router</a>
      <a href="https://github.com/ruby-hyperloop/hyper-spec">hyper-spec</a>
      <a href="https://github.com/ruby-hyperloop/hyper-trace">hyper-trace</a>
    </div>
    <div>
      <h6><a href="/tools" class="hyperloop-white">Tools</a></h6>
      <a href="#testing">Testing</a>
    	<a href="#tools">Tools</a>
    	<a href="#debugging">Debugging</a>
    </div>
    <div>
      <h6><a href="/docs/architecture" class="hyperloop-white">Docs</a></h6>
      <a href="/docs/architecture">Architecture</a>
      <a href="/docs/components/dsl-overview">Components</a>
      <a href="/docs/stores/overview">Stores</a>
      <a href="/docs/models/overview">Models</a>
      <a href="/docs/operations/overview">Operations</a>
      <a href="/docs/policies/authorization">Policies</a>
    </div>

  </section>

  <section class="otherlinks">
    <a href="https://github.com/ruby-hyperloop" class="hyperloop-white">Github</a>
    <a href="/support" class="hyperloop-white">Help</a>
    <a href="/blog" class="hyperloop-white">Blog</a>
    <a href="/showcase" class="hyperloop-white">Showcase</a>
  </section>

  <section class="copyright">
    Copyright © 2017 Hyperloop.
  </section>
</footer>


    <script>
      (function(Opal) {
        var self = Opal.top, $scope = Opal, nil = Opal.nil, $breaker = Opal.breaker, $slice = Opal.slice;
        Opal.add_stubs(['$puts']);
        return self.$puts("Opal ok")
      })(Opal);
    </script>

    <!-- <script   src="http://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script> -->


    <script type="text/ruby">puts "Hyperloop JS ok"</script>

    


  </body>
</html>
