<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="google-site-verification" content="qjqVOvRhHfsuDbLOvaAnj2mkUZJ9Xwzg84TMVXduvUc" />

    <meta charset="UTF-8">
    <title>Hyperloop - Installation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

    <!-- <link href="/stylesheets/base.css" rel="stylesheet" />
    <link href="/stylesheets/normalize.css" rel="stylesheet" />
    <link href="/stylesheets/stylesheet.css" rel="stylesheet" />
    <link href="/stylesheets/github-light.css" rel="stylesheet" /> -->

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>
    <script src="https://rawgit.com/reactrb/reactrb-express/master/reactrb-express.js"></script>

    <script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>

    <script src="/javascripts/bootstrap.min.js"></script>
    <script src="/javascripts/codemirror.js"></script>
    <script src="/javascripts/ruby.js"></script>
    <script src="/javascripts/matchbrackets.js"></script>

    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet" />
    <link href="/stylesheets/override.css" rel="stylesheet" />
    <!-- <link href="/stylesheets/code.css" rel="stylesheet" /> -->
    <link href="/stylesheets/github.css" rel="stylesheet" />
    <link href="/stylesheets/highlighting.css" rel="stylesheet" />
    <link href="/stylesheets/codemirror.css" rel="stylesheet" />

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/images/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/images/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

  </head>

  <body>
    <div class="container">
      <nav class="navbar navbar-ligh">
  <button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2" aria-controls="exCollapsingNavbar2" aria-expanded="false" aria-label="Toggle navigation">
    &#9776;
  </button>
  <div class="collapse navbar-toggleable-xs" id="exCollapsingNavbar2">
    <ul class="nav navbar-nav">
      <li class="nav-item">
        <a href="/" class="nav-link">Hyperloop</a>
      </li>
      <li class="nav-item">
        <a href="/get_started" class="nav-link active">Get Started</a>
      </li>
      <li class="nav-item">
        <a href="/tutorials" class="nav-link">Tutorials</a>
      </li>
      <li class="nav-item">
        <a href="/installation" class="nav-link">Installation</a>
      </li>
      <li class="nav-item">
        <a href="/gems" class="nav-link">Gems</a>
      </li>
      <li class="nav-item">
        <a href="https://github.com/ruby-hyperloop" class="nav-link">Github</a>
      </li>
      <li class="nav-item">
        <a href="/tools" class="nav-link">Tools</a>
      </li>
      <li class="nav-item">
        <a href="/docs/dsl_overview" class="nav-link">Docs</a>
      </li>
      <li class="nav-item">
        <a href="/support" class="nav-link">Support</a>
      </li>
      <li class="nav-item">
        <a href="/blog" class="nav-link">Blog</a>
      </li>
    </ul>
  </div>
</nav>

    </div>

    <div class="jumbotron page-header">
      <div class="container">
        <div class="row hidden-xs-down">
          <div class="col-md-3 center-text">
            <img src="/images/hyperloop_white.svg" width="180" alt="Hyperloop white" />
          </div>
          <div class="col-md-9">
            <h1 class="display-4 project-name">Hyperloop</h1>
            </br>
            <h2 class="display-7 project-tagline">
              INSTALLATION
            </h2>
          </div>
        </div>
        <div class="row hidden-sm-up">
          <div class="col-md-3 center-text">
            <img src="/images/hyperloop_white.svg" width="120" alt="Hyperloop white" />
          </div>
          <div class="col-md-9">
            <h1 class="h1 project-name center-text">Hyperloop</h1>
            </br>
            <h2 class="h4 project-tagline center-text">
              INSTALLATION
            </h2>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-3">
            <ul class="nav">
    <li class="nav-item"><a href="#opal-playground">Opal Playground</a></br></li>
    <li class="nav-item"><a href="#using-hyperloop-express">Using Hyperloop Express</a></br></li>
    <li class="nav-item"><a href="#with-rails">With Rails</a></br></li>
    <li class="nav-item"><a href="#manual-rails-install">Manual Rails Install</a></br></li>
    <li class="nav-item"><a href="#with-sinatra">With Sinatra</a></br></li>
    <li class="nav-item"><a href="#building-with-rake">Building with Rake</a></br></li>
    <li class="nav-item"><a href="#deployment">Deployment</a></br></li>
  </ul>

          <br>
        </div>
        <div class="col-md-9 main-content">
          <h1 id="installation">Installation</h1>

<p>There are several ways to install Hyperloop into your development environment.</p>

<ul>
<li>Experimenting online in the Opal playground</li>
<li>Running exclusively in your browser with Hyperloop Express</li>
<li>Integrating with the Rails Asset Pipeline</li>
<li>Building a single <code>application.js</code> with Rake</li>
<li>Using NPM and Webpack to require all your JavaScript components</li>
</ul>

<h2 id="opal-playground">Opal Playground</h2>

<p>A great way to start learning HyperReact is use OpalPlayground.</p>

<p>Here is a simple HelloWorld example to get you started.</p>

<p><strong><a href="http://fkchang.github.io/opal-playground/?code:class%20HelloWorld%20%3C%20React%3A%3AComponent%3A%3ABase%0A%20%20param%20%3Avisitor%0A%0A%20%20def%20render%0A%20%20%20%20%22Hello%20there%20%23%7Bparams.visitor%7D%22%0A%20%20end%0Aend%0A%0A%0AElement%5B%27%23content%27%5D.render%20do%0A%20%20HelloWorld%20visitor%3A%20%22world%22%0Aend%0A%0A%0A&amp;html_code=%3Cdiv%20id%3D%27content%27%3E%3C%2Fdiv%3E&amp;css_code=body%20%7B%0A%20%20background%3A%20%23eeeeee%3B%0A%7D%0A">HelloWorld</a></strong></p>

<h2 id="using-hyperloop-express">Using Hyperloop Express</h2>

<p>For small static sites that don&#39;t need a server backend you can use the reactrb-express javascript library.
Simply include the reactrb-express.js file with your other javascript code, or access it directly via the CDN, and you are good to go.</p>

<p>This is another great way to experiment with HyperReact.  You don&#39;t need any setup or download to get started.</p>

<p><a href="https://github.com/reactrb/reactrb-express">Hyperloop Express</a></p>

<h2 id="with-rails">With Rails</h2>

<p>HyperReact works great with new or existing rails apps, and HyperReact plays well with other frameworks, so it&#39;s pain free to introduce React to your application.</p>

<p>We recommend you use the <a href="https://github.com/ruby-hyperloop/hyper-rails">HyperRails</a> gem to do a transparent install of everything you need in a new or existing rails app.</p>

<p>In your <code>Gemfile</code></p>
<pre class="highlight ruby"><code><span class="n">gem</span> <span class="s2">"hyper-rails"</span>
</code></pre>
<p>then</p>
<pre class="highlight ruby"><code><span class="n">bundle</span> <span class="n">install</span>
<span class="n">rails</span> <span class="n">g</span> <span class="n">hyperloop</span><span class="ss">:install</span>
<span class="n">bundle</span> <span class="n">update</span>
</code></pre>
<p>If you need any help with your installation please contact us on <a href="https://gitter.im/reactrb/chat">gitter.im</a></p>

<p>Within a Rails app React Components are by convention stored in the <code>app/views/components</code> directory.</p>

<p>Your Rails controllers, and layouts access your top level components using the <code>render_component</code> method.</p>

<p>During server-side-rendering your components will be called on to generate the resulting HTML just like ERB or HAML templates.  The resulting HTML is delivered to the client like any other rails view, but in addition all the code needed to keep the component dynamically updating is delivered as well.  So now as events occur on the client the code is re-rendered client side with no server action required.</p>

<p>Because React plays well with others, you can start with a single aspect of a page or layout (a dynamic chat widget for example) and add a React component to implement that functionality.</p>

<h4 id="rendering-components">Rendering Components</h4>

<p>Once you are setup (i.e. <code>rails g hyperloop:install</code>) components may be rendered directly from a controller action by simply following a naming convention.</p>

<p>To render a component from the <code>home#show</code> action, create a component class named <code>Show</code>.  Note: You can use the <code>rails g hyperloop:component Home::Show</code> command to generate a component template.</p>
<pre class="highlight ruby"><code><span class="c1"># app/views/components/home/show.rb</span>
<span class="k">module</span> <span class="nn">Components</span>
  <span class="k">module</span> <span class="nn">Home</span>
    <span class="k">class</span> <span class="nc">Show</span> <span class="o">&lt;</span> <span class="no">React</span><span class="o">::</span><span class="no">Component</span><span class="o">::</span><span class="no">Base</span>

      <span class="n">param</span> <span class="ss">:say_hello_to</span>

      <span class="k">def</span> <span class="nf">render</span>
        <span class="nb">puts</span> <span class="s2">"Rendering my first component!"</span>
        <span class="s2">"hello </span><span class="si">#{</span><span class="n">params</span><span class="p">.</span><span class="nf">say_hello_to</span> <span class="k">if</span> <span class="n">params</span><span class="p">.</span><span class="nf">say_hello_to</span><span class="si">}</span><span class="s2">"</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<p>To render the component call <code>render_component</code> in the controller action passing along any params:</p>
<pre class="highlight ruby"><code><span class="c1"># controllers/home_controller.rb</span>
<span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">show</span>
    <span class="c1"># render_component uses the controller name to find the 'show' component.</span>
    <span class="n">render_component</span> <span class="ss">say_hello_to: </span><span class="n">params</span><span class="p">[</span><span class="ss">:say_hello_to</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<p>Or from a view:</p>
<pre class="highlight ruby"><code><span class="o">&lt;</span><span class="sx">%= react_component('Home::Show', say_hello_to: "Sally") %&gt;
</span></code></pre>
<p>Make sure your routes file has a route to your home#show action. Visit that route in your browser and you should see &#39;Hello&#39; rendered.</p>

<p>Open up the js console in the browser and you will see a log showing what went on during rendering.</p>

<p>Have a look at the sources in the console, and notice your ruby code is there, and you can set break points etc.</p>

<h3 id="manual-rails-install">Manual Rails Install</h3>

<p>The following can easily be achieved by using the generators in <a href="https://github.com/ruby-hyperloop/hyper-rails">hyper-rails</a> gem but the steps are simple if you prefer to do them yourself.</p>

<p>To start using HyperReact within a new or existing Rails 4.x or Rails 5.x app, follow these steps:</p>

<h4 id="step-1-add-the-gems">Step 1 - Add the gems</h4>

<p>In your Gemfile:</p>
<pre class="highlight ruby"><code><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'opal-rails'</span>
<span class="n">gem</span> <span class="s1">'opal-browser'</span>
<span class="n">gem</span> <span class="s1">'hyper-react'</span>
<span class="n">gem</span> <span class="s1">'therubyracer'</span><span class="p">,</span> <span class="ss">platforms: :ruby</span>
<span class="n">gem</span> <span class="s1">'react-router-rails'</span><span class="p">,</span> <span class="s1">'~&gt; 0.13.3'</span>
<span class="n">gem</span> <span class="s1">'hyper-router'</span>
<span class="n">gem</span> <span class="s1">'hyper-mesh'</span>
</code></pre>
<p>Run <code>bundle install</code> and restart your rails server.</p>

<h4 id="step-2-add-the-components-directory-and-manifest">Step 2 - Add the components directory and manifest</h4>

<p>Your react components will go into the <code>app/views/components/</code> directory of your rails app.</p>

<p>Within your <code>app/views</code> directory you need to create a <code>components.rb</code> manifest.</p>

<p>Files required in <code>app/views/components.rb</code> will be made available to the server side rendering system as well as the browser.</p>
<pre class="highlight ruby"><code><span class="c1"># app/views/components.rb</span>
<span class="nb">require</span> <span class="s1">'opal'</span>
<span class="nb">require</span> <span class="s1">'react/react-source'</span>
<span class="nb">require</span> <span class="s1">'hyper-react'</span>
<span class="k">if</span> <span class="no">React</span><span class="o">::</span><span class="no">IsomorphicHelpers</span><span class="p">.</span><span class="nf">on_opal_client?</span>
  <span class="nb">require</span> <span class="s1">'opal-jquery'</span>
  <span class="nb">require</span> <span class="s1">'browser'</span>
  <span class="nb">require</span> <span class="s1">'browser/interval'</span>
  <span class="nb">require</span> <span class="s1">'browser/delay'</span>
  <span class="c1"># add any additional requires that can ONLY run on client here</span>
<span class="k">end</span>
<span class="nb">require</span> <span class="s1">'hyper-router'</span>
<span class="nb">require</span> <span class="s1">'react_router'</span>
<span class="nb">require</span> <span class="s1">'hyper-mesh'</span>
<span class="nb">require</span> <span class="s1">'models'</span>
<span class="n">require_tree</span> <span class="s1">'./components'</span>
</code></pre>
<h4 id="step-3-client-side-assets">Step 3 - Client Side Assets</h4>

<p>Typically the client will need all the above assets, plus other files that are client only. Notably jQuery is a client only asset.</p>

<p>NOTE: You can update your existing application.js file, or convert it to ruby syntax and name it application.rb. The example below assumes you are using ruby syntax. However if you are using <code>application.js</code> then use the standard <code>//= require &#39;...&#39;</code> format and load your components with <code>Opal.load(&#39;components&#39;);</code></p>

<p>Assuming you are using the ruby syntax (application.rb), in <code>assets/javascript/application.rb</code> require your components manifest as well as any additional browser only assets.</p>
<pre class="highlight ruby"><code><span class="c1"># assets/javascript/application.rb</span>

<span class="c1"># Add React and make components available by requiring your components.rb manifest.</span>
<span class="nb">require</span> <span class="s1">'react/react-source'</span>
<span class="nb">require</span> <span class="s1">'components'</span>

<span class="c1"># 'react_ujs' tells react in the browser to mount rendered components.</span>
<span class="nb">require</span> <span class="s1">'react_ujs'</span>

<span class="c1"># Require your other javascript assets. jQuery for example...</span>
<span class="nb">require</span> <span class="s1">'jquery'</span>      <span class="c1"># You need both these files to access jQuery from Opal.</span>
<span class="nb">require</span> <span class="s1">'opal-jquery'</span> <span class="c1"># They must be in this order.</span>
<span class="nb">require</span> <span class="s1">'opal-browser'</span>

<span class="c1"># Finally have Opal load your components.rb</span>
<span class="no">Opal</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="s1">'components'</span><span class="p">)</span>
</code></pre>
<h4 id="step-4-update-application-rb">Step 4 - Update application.rb</h4>

<p>Finally you will need to update your <code>application.rb</code> to ensure everything works in production:</p>
<pre class="highlight ruby"><code><span class="n">config</span><span class="p">.</span><span class="nf">eager_load_paths</span> <span class="o">+=</span> <span class="sx">%W(</span><span class="si">#{</span><span class="n">config</span><span class="p">.</span><span class="nf">root</span><span class="si">}</span><span class="sx">/app/models/public)</span>
<span class="n">config</span><span class="p">.</span><span class="nf">eager_load_paths</span> <span class="o">+=</span> <span class="sx">%W(</span><span class="si">#{</span><span class="n">config</span><span class="p">.</span><span class="nf">root</span><span class="si">}</span><span class="sx">/app/views/components)</span>
<span class="n">config</span><span class="p">.</span><span class="nf">autoload_paths</span> <span class="o">+=</span> <span class="sx">%W(</span><span class="si">#{</span><span class="n">config</span><span class="p">.</span><span class="nf">root</span><span class="si">}</span><span class="sx">/app/models/public)</span>
<span class="n">config</span><span class="p">.</span><span class="nf">autoload_paths</span> <span class="o">+=</span> <span class="sx">%W(</span><span class="si">#{</span><span class="n">config</span><span class="p">.</span><span class="nf">root</span><span class="si">}</span><span class="sx">/app/views/components)</span>
<span class="n">config</span><span class="p">.</span><span class="nf">assets</span><span class="p">.</span><span class="nf">paths</span> <span class="o">&lt;&lt;</span> <span class="o">::</span><span class="no">Rails</span><span class="p">.</span><span class="nf">root</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="s1">'models'</span><span class="p">).</span><span class="nf">to_s</span>
</code></pre>
<h3 id="rendering-components">Rendering components</h3>

<p>There are two ways to render a component - either directly from a controller or from a view. If you opt to render a component from a controller, pre-rendering is done by default, but if you opt to render the component via a view then pre-rendering is not done by default. There are limitations to pre-rendering (for example you cannot use JQuery) so it is up to you to decide which approach you prefer.</p>

<h4 id="mounting-a-component-from-a-controller">Mounting a component from a controller:</h4>
<pre class="highlight ruby"><code><span class="c1"># controllers/home_controller.rb</span>
<span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">show</span>
    <span class="c1"># render_component uses the controller name to find the 'show' component.</span>
    <span class="n">render_component</span> <span class="ss">say_hello_to: </span><span class="n">params</span><span class="p">[</span><span class="ss">:say_hello_to</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="c1"># or just simply with no params</span>
    <span class="n">render_component</span>
  <span class="k">end</span>
</code></pre>
<h4 id="mounting-a-component-from-a-view">Mounting a component from a view:</h4>
<pre class="highlight ruby"><code><span class="c1"># views/home/show.html.erb</span>
<span class="o">&lt;</span><span class="sx">%= react_component('Home::Show', say_hello_to: params[:say_hello_to]) %&gt;
</span></code></pre>
<h2 id="with-sinatra">With Sinatra</h2>

<p>HyperReact works fine with Sinatra.  Use this <a href="https://github.com/reactrb/reactrb-examples">Sinatra Example App</a> to get started.</p>

<h2 id="building-with-rake">Building With Rake</h2>

<p>You can also build a simple front end application with no back end consisting of one JS file, one CSS file and and index.html.</p>

<p>In the example below we will build a simple app.js file from a Hyper-react components using Opal.</p>

<p>Add the following gems, and run <code>bundle install</code>.</p>
<pre class="highlight ruby"><code><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'opal'</span>
<span class="n">gem</span> <span class="s1">'opal-browser'</span> <span class="c1"># optional</span>
<span class="n">gem</span> <span class="s1">'hyper-react'</span>
<span class="n">gem</span> <span class="s1">'opal-jquery'</span>  <span class="c1"># optional</span>
</code></pre>
<p>Your rake file task will look like this:</p>
<pre class="highlight ruby"><code><span class="c1">#rake.rb</span>
<span class="nb">require</span> <span class="s1">'opal'</span>
<span class="nb">require</span> <span class="s1">'hyper-react'</span>

<span class="n">desc</span> <span class="s2">"Build app.js"</span>
<span class="n">task</span> <span class="ss">:build</span> <span class="k">do</span>
   <span class="no">Opal</span><span class="p">.</span><span class="nf">append_path</span> <span class="s2">"react_lib"</span>
    <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"app.js"</span><span class="p">,</span> <span class="s2">"w+"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">out</span><span class="o">|</span>
      <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="no">Opal</span><span class="o">::</span><span class="no">Builder</span><span class="p">.</span><span class="nf">build</span><span class="p">(</span><span class="s2">"application"</span><span class="p">).</span><span class="nf">to_s</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<p>Your main <code>application.rb</code> file will look like this:</p>
<pre class="highlight ruby"><code><span class="c1">#react_lib/application.rb</span>

<span class="nb">require</span> <span class="s1">'opal'</span>
<span class="nb">require</span> <span class="s1">'browser/interval'</span> <span class="c1"># optional</span>
<span class="nb">require</span> <span class="s1">'browser/delay'</span>    <span class="c1"># optional</span>
<span class="c1"># you can pull in the jQuery.js file here, or separately</span>
<span class="c1"># but in must be loaded BEFORE opal-jquery</span>
<span class="nb">require</span> <span class="s1">'opal-jquery'</span>      <span class="c1"># optional</span>
<span class="nb">require</span> <span class="s1">'react/react-source'</span>
<span class="nb">require</span> <span class="s1">'hyper-react'</span>
<span class="c1"># here you can require other files, do a require_tree, or</span>
<span class="c1"># just add some components inline right here...</span>
<span class="k">class</span> <span class="nc">Clock</span> <span class="o">&lt;</span> <span class="no">React</span><span class="o">::</span><span class="no">Component</span><span class="o">::</span><span class="no">Base</span>

  <span class="k">def</span> <span class="nf">render</span>
    <span class="s2">"Hello there - Its </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Document</span><span class="p">.</span><span class="nf">ready?</span> <span class="k">do</span>
  <span class="no">Element</span><span class="p">[</span><span class="s1">'#content'</span><span class="p">].</span><span class="nf">render</span><span class="p">{</span> <span class="no">Clock</span><span class="p">()</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>
<p>Run <code>bundle exec rake build</code></p>

<p>This should build <code>app.js</code> which can be included in your main html file.</p>

<p>Your <code>index.html</code> will look like this:</p>
<pre class="highlight html"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://code.jquery.com/jquery-1.11.0.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://code.jquery.com/jquery-migrate-1.2.1.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/react@15/dist/react.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/react-dom@15/dist/react-dom.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"styles.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
<p>Two things to note about the code above:</p>

<ul>
<li><code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code> is important as this is required by Opal</li>
<li><code>&lt;div id=&quot;content&quot;&gt;&lt;/div&gt;</code> is where our Clock component will be rendered from <code>Element[&#39;#content&#39;].render{ Clock() }</code></li>
</ul>

<p>As a final note, the resulting JS file may be a little large, so you might want to Gzip or uglify it.</p>

<h2 id="deployment">Deployment</h2>

<p>There are a few deployment specific considerations:</p>

<ul>
<li>The resulting compiled JavaScript files can be quite large, so you might want to add a minimise, uglify or gzip step</li>
<li>Some free deployment PaaS (Heroku for example) include low levels of memory and system resources. HyperReact may be configured in such a way that it is pre-rendering all pages before they are delivered to the browser and this can be an issue to the PaaS in a low memory environment. If the server is constrained it is better to turn pre-rendering off.</li>
</ul>

<p>There is a most excellent <a href="https://github.com/fzingg/hyperloop-showcase-heroku">Tutorial written by Frederic ZINGG</a> which takes you through a step by step guid to deploying on Heroku.</p>

<h2 id="next-steps">Next Steps</h2>

<p>Check out <a href="/tutorials">the tutorials</a> to learn more.</p>

<p>Good luck, and welcome!</p>

        </div>
      </div>
    </div>

    <script>
      (function(Opal) {
        var self = Opal.top, $scope = Opal, nil = Opal.nil, $breaker = Opal.breaker, $slice = Opal.slice;
        Opal.add_stubs(['$puts']);
        return self.$puts("Opal ok")
      })(Opal);
    </script>

    <!-- <script   src="http://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script> -->

    <script type="text/ruby">puts "Hyperloop Express ok"</script>

    <script type="text/ruby">

class CodeMirror < React::Component::Base
  param :code, type: String
  define_state :error_message

  before_mount do
    state.error_message! ""
  end

  after_mount do
    @editor = `CodeMirror(document.getElementById("code"), {
      value: #{params.code},
      mode: "text/x-ruby",
      matchBrackets: true,
      lineNumbers: true,
      indentUnit: 2,
      theme: 'github'
    });`
    `#{@editor}.on('change', #{lambda {on_change} })`
    execute_code
  end

  render(DIV) do
    div(id: 'code')
    br
    div(id: 'result')
    p { state.error_message }
  end

  def on_change
    state.error_message! ""
    execute_code
  end

  after_mount   :execute_code
  after_update  :execute_code

  def execute_code
    compiled_code = Opal::Compiler.new(`#{@editor}.getValue()`).compile
    `ReactDOM.unmountComponentAtNode(document.getElementById("result"));`
    `eval(#{compiled_code})`
    Element['#result'].render{ Alfie() }
    rescue Exception => e
    @time_out = after(0.5) do
      state.error_message! e.message
    end
  end

end

class TestApp < React::Component::Base
  param :name
  before_mount { @timer = every(1) { force_update! } }
  render(DIV) do
    h1 {"The current time is #{Time.now}"}
    h2 { "here hello #{params.name}" }.on(:click) do
     alert "you clicked"
    end
  end
end

</script>


  </body>
</html>
